<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Farming Advisor - Dashboard</title>
    
    <!-- Fix CSS links -->
    <link rel="stylesheet" type="text/css" href="./css/styles.css">
    <link rel="stylesheet" type="text/css" href="./css/market.css">
    <link rel="stylesheet" type="text/css" href="./css/common.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div id="loading-indicator" class="loading-spinner">Loading...</div>
    <nav class="sidebar">
        <div class="sidebar-header">
            <img src="img/logo.png" alt="Farm Advisor Logo" class="logo">
            <h1>Farm Opt</h1>
        </div>
        <ul class="nav-links">
            <li class="active"><a href="index.html"><i class="fas fa-home"></i> Dashboard</a></li>
            <li><a href="market.html"><i class="fas fa-chart-line"></i> Market Trends</a></li>
            <li><a href="recommendations.html"><i class="fas fa-lightbulb"></i> Recommendations</a></li>
            <li><a href="history.html"><i class="fas fa-history"></i> History</a></li>
        </ul>
    </nav>

    <main class="main-content">
        <!-- Enhanced Header -->
        <header class="dashboard-header">
            <div class="header-left">
                <h2>Farm Dashboard</h2>
                <p class="date-info">April 6, 2025 | Last updated: 2 hours ago</p>
            </div>
            <div class="header-right">
                <div class="weather-info">
                    <i class="fas fa-cloud-sun"></i>
                    <span id="current-weather">28°C | Partly Cloudy</span>
                </div>
                <div class="user-actions">
                    <button class="action-btn"><i class="fas fa-bell"></i></button>
                    <button class="action-btn"><i class="fas fa-cog"></i></button>
                    <img src="img/user-avatar.png" alt="User Avatar" class="avatar">
                </div>
            </div>
        </header>

        <!-- Enhanced Quick Stats Section -->
        <section class="stats-overview">
            <div class="stats-cards">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-thermometer-half"></i>
                    </div>
                    <div class="stat-details">
                        <h3>Soil Health Index</h3>
                        <div class="stat-value" id="avg-soil-ph">7.2</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            <span>3.2% from last week</span>
                        </div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-seedling"></i>
                    </div>
                    <div class="stat-details">
                        <h3>Crop Yield Forecast</h3>
                        <div class="stat-value" id="avg-crop-yield">92.5%</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            <span>5.3% increase expected</span>
                        </div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-flask"></i>
                    </div>
                    <div class="stat-details">
                        <h3>Resource Efficiency</h3>
                        <div class="stat-value" id="resource-efficiency">88.3%</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            <span>2.1% improvement</span>
                        </div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-leaf"></i>
                    </div>
                    <div class="stat-details">
                        <h3>Sustainability Score</h3>
                        <div class="stat-value" id="sustainability-score">94.2</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            <span>4.2% increase</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Enhanced Charts Section -->
        <section class="chart-section">
            <div class="chart-row">
                <div class="chart-container">
                    <h3>Soil Health Trends</h3>
                    <canvas id="soil-mixture-chart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>Crop Performance Analysis</h3>
                    <canvas id="crop-distribution-chart"></canvas>
                </div>
            </div>
            <div class="chart-row">
                <div class="chart-container">
                    <h3>Resource Utilization</h3>
                    <canvas id="resource-usage-chart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>Market Price Analysis</h3>
                    <canvas id="market-analysis-chart"></canvas>
                </div>
            </div>
        </section>

        <!-- Enhanced Data Tables Section -->
        <section class="data-insights">
            <div class="table-container">
                <h3>Recent Farm Activities</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Activity Type</th>
                            <th>Details</th>
                            <th>Status</th>
                            <th>Impact</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="farm-data-body">
                        <!-- Will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Add Farm Data Section -->
        <section class="farm-data-section">
            <div class="section-header">
                <h3>Farm Analysis Data</h3>
                <div class="filter-controls">
                    <select id="cropTypeFilter" class="filter-select">
                        <option value="">All Crops</option>
                        <option value="Wheat">Wheat</option>
                        <option value="Corn">Corn</option>
                        <option value="Soybean">Soybean</option>
                        <option value="Rice">Rice</option>
                    </select>
                    <button id="refreshData" class="refresh-btn">
                        <i class="fas fa-sync-alt"></i> Refresh Data
                    </button>
                </div>
            </div>
            <div class="table-container">
                <table class="farm-data-table">
                    <thead>
                        <tr>
                            <th>Farm ID</th>
                            <th>Soil pH</th>
                            <th>Soil Moisture (%)</th>
                            <th>Temperature (°C)</th>
                            <th>Rainfall (mm)</th>
                            <th>Crop Type</th>
                            <th>Fertilizer (kg)</th>
                            <th>Pesticide (kg)</th>
                            <th>Yield (ton)</th>
                            <th>Sustainability</th>
                        </tr>
                    </thead>
                    <tbody id="farmDataBody">
                        <!-- Will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Add Insights Section -->
        <section class="insights-section">
            <h3>Smart Insights</h3>
            <div class="insights-container">
                <div class="insight-card">
                    <div class="insight-icon">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <div class="insight-content">
                        <h4>Soil Health Recommendation</h4>
                        <p>Consider adding organic matter to improve soil structure in Field B.</p>
                    </div>
                </div>
                <div class="insight-card">
                    <div class="insight-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="insight-content">
                        <h4>Market Opportunity</h4>
                        <p>Wheat prices expected to rise by 12% next month. Consider adjusting harvest schedule.</p>
                    </div>
                </div>
                <div class="insight-card">
                    <div class="insight-icon">
                        <i class="fas fa-cloud-rain"></i>
                    </div>
                    <div class="insight-content">
                        <h4>Weather Alert</h4>
                        <p>Heavy rainfall expected next week. Prepare drainage systems.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/dashboard.js"></script>
    
</body>
</html>